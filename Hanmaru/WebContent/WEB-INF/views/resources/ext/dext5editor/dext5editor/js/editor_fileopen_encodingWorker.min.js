self.addEventListener("message",function(b){b=b.data;if(b.init){var h=!1;FileReaderSync&&(h=!0);postMessage({result:h})}else try{var e=0,c=4,h=b.mozSlice?b.mozSlice(e,c):b.webkitSlice?b.webkitSlice(e,c):b.slice(e,c),d=new FileReaderSync,l=d.readAsArrayBuffer(h),a=new Uint8Array(l),d=l=void 0,k=!1,d="";if(239==(a[0]&255)&&187==(a[1]&255)&&191==(a[2]&255))d="UTF-8",k=!0;else if(254==(a[0]&255)&&255==(a[1]&255))d="UTF-16BE",k=!0;else if(255==(a[0]&255)&&254==(a[1]&255))d="UTF-16LE",k=!0;else if(0==(a[0]&
255)&&0==(a[1]&255)&&254==(a[0]&255)&&255==(a[1]&255))d="UTF-32BE",k=!0;else if(255==(a[0]&255)&&254==(a[1]&255)&&0==(a[0]&255)&&0==(a[1]&255))d="UTF-32LE",k=!0;else{a=!0;e=0;c=8192;c>=b.size&&(c=b.size);for(;c<=b.size;){for(var h=b.mozSlice?b.mozSlice(e,c):b.webkitSlice?b.webkitSlice(e,c):b.slice(e,c),q=new FileReaderSync,r=q.readAsArrayBuffer(h),m=new Uint8Array(r),q=r=void 0,f,g,l=!0,n=f=0;n<m.length;n++)if(g=m[n]&255,0!=(g&128)&&(l=!1),0==f){if(128<=g){do g=g<<1&255,f++;while(0!=(g&128));f--;
if(0==f){a=!1;break}}}else{if(128!=(g&192)){a=!1;break}f--}m=void 0;0<f&&(a=!1);l&&(a=!1);if(c>=b.size)break;e=c+1;c=e+8192;c>b.size&&(c=b.size)}d=a?"UTF-8":"EUC-KR"}var p=new FileReader;p.onload=function(a){postMessage({result:this.result,hasBom:k});p=void 0};p.readAsText(b,d)}catch(t){postMessage({result:"[DEXT5Error] "+t.message,hasBom:!1})}},!1);
